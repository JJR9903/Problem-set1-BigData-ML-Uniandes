html_elements("table")%>%
html_table()
tablas<- my_html %>%
html_elements("table")%>%
html_table()
oscar <- data.frame()
for (i in 2:(length(tablas)-1)){
temp <- tablas[[i]]
oscar <- bind_rows(oscar, temp)
}
View(oscar)
columna1 <- oscar$`Título original y en español`
filtro <- grepl("ª",columna1)# saca T o F si contiene "ª"
oscar<- oscar[!filtro,]
oscar$ceremonia <- ceremonia
View(oscar)
names(oscar)[6]<-"oscars ganados"
names(oscar)[7]<-"número de nominaciones"
names(oscar)[8]<-"candidatas (título original)"
View(oscar)
data.frame()
win_sports <- "https://www.winsports.co"
<a href="page1.html"> Data chunk 1</a>
problem_set <- "https://ignaciomsarmiento.github.io/GEIH2018_sample/page1.html"
problem_set_html<-read_html(problem_set)
View(problem_set_html)
problem_set_URL <- "https://ignaciomsarmiento.github.io/GEIH2018_sample/pages/geih_page_1.html"
problem_set_html<-read_html(problem_set)
problem_set_html<-read_html(problem_set)%>%
hmtl_table()
problem_set_html<-read_html(problem_set)%>%
html_table()
View(problem_set_html)
problem_set_html<-read_html(problem_set_URL)%>%
html_table()
help(paste)
View(problem_set_html)
problem_set%>% html_table()
problem_set_URL <- paste0("https://ignaciomsarmiento.github.io/GEIH2018_sample/pages/geih_page_",1:10,".html")
View(problem_set_URL)
problem_set_URL
for (url in problem_set_URL){}
list= ls()
list
problem_set_html %>%>
problem_set_html %>%
data_frame()
problem_set_html %>%
as.data.frame()
df <- as.data.frame(read_html("https://ignaciomsarmiento.github.io/GEIH2018_sample/pages/geih_page_1.html")%>%
html_table())
View(df)
for (url in problem_set_URL){
print(url)
df <- as.data.frame(read_html(url)%>%
html_table())
GEIH_2018<-rbind(GEIH_2018,df)
}
GEIH_2018<- data.frame()
for (url in problem_set_URL){
print(url)
df <- as.data.frame(read_html(url)%>%
html_table())
GEIH_2018<-rbind(GEIH_2018,df)
}
View(GEIH_2018)
v=ln(0)
v = lg(0)
library("SciViews")
install.packages("SciViews")
library("SciViews")
ln(exp(3))
ln(0)
rm(list=ls())
# este setwd por ahora no esta funcionando, toca que cada uno lo haga independiente mientras logro que funcione. att: Juan Jose
dir_set <- function(){
if(Sys.info()["user"]=="JuanJose"){
setwd("/Users/JuanJose/Library/CloudStorage/OneDrive-UniversidaddelosAndes/Uniandes/9 Semestre - 1 PEG/Big Data/Problems Set/Problem Set 1/GitHub")
}
else if("/Users/PC-portatil"%in%getwd()){
setwd("")
}
else{
setwd("C:/Users/Usuario/Documents/GitHub/Problem Set 1")
}
}
dir_set()
pacman:: p_load(rvest, tidyverse, skimr, stargazer,cowplot)
#Loading data without web Scraping step
load("stores/GEIH_2018.RData")
names(GEIH_2018)
GEIH_2018<-GEIH_2018%>%
filter(GEIH_2018$age>18)
ln = ln(GEIH_2018$ingtot)
View(GEIH_2018)
sexo <- ggplot(GEIH_2018, aes(sex)) +
geom_histogram(fill = "#28BFE8", color = "white",binwidth=0.5) +
geom_vline(aes(xintercept=mean(sex),color="Mean"), size=1)+
geom_vline(aes(xintercept=mean(sex)+sd(sex),color="sd"), linetype="dashed", size=1)+
geom_vline(aes(xintercept=mean(sex)-sd(sex),color="sd"), linetype="dashed", size=1)+
scale_color_manual(name= "sexo", values = c(Mean = "blue", sd = "red"))+
theme_minimal()
sexo <- ggplot(GEIH_2018, aes(college)) +
geom_histogram(fill = "#28BFE8", color = "white",binwidth=0.5) +
geom_vline(aes(xintercept=mean(college),color="Mean"), size=1)+
geom_vline(aes(xintercept=mean(college)+sd(college),color="sd"), linetype="dashed", size=1)+
geom_vline(aes(xintercept=mean(college)-sd(college),color="sd"), linetype="dashed", size=1)+
scale_color_manual(name= "educación terciaria", values = c(Mean = "blue", sd = "red"))+
theme_minimal()
sexo
college <- ggplot(GEIH_2018, aes(college)) +
geom_histogram(fill = "#28BFE8", color = "white",binwidth=0.5) +
geom_vline(aes(xintercept=mean(college),color="Mean"), size=1)+
geom_vline(aes(xintercept=mean(college)+sd(college),color="sd"), linetype="dashed", size=1)+
geom_vline(aes(xintercept=mean(college)-sd(college),color="sd"), linetype="dashed", size=1)+
scale_color_manual(name= "educación terciaria", values = c(Mean = "blue", sd = "red"))+
theme_minimal()
sexo <- ggplot(GEIH_2018, aes(sex)) +
geom_histogram(fill = "#28BFE8", color = "white",binwidth=0.5) +
geom_vline(aes(xintercept=mean(sex),color="Mean"), size=1)+
geom_vline(aes(xintercept=mean(sex)+sd(sex),color="sd"), linetype="dashed", size=1)+
geom_vline(aes(xintercept=mean(sex)-sd(sex),color="sd"), linetype="dashed", size=1)+
scale_color_manual(name= "sexo", values = c(Mean = "blue", sd = "red"))+
theme_minimal()
sexo
str(GEIH_2018) # structure of dataset
summary(GEIH_2018$sex)
help("summary")
help("filter")
help("subset")
help("select")
summary(GEIH_2018%>%select(sex,college,clase,cotPension,cuentaPropia,formal), digits = 4)
sum= summary(GEIH_2018%>%select(sex,college,clase,cotPension,cuentaPropia,formal), digits = 4)
sum
sum_Ing= summary(GEIH_2018%>%select(,grep('^y|ie|ing|im|iof', names(GEIH_2018))), digits = 4)
sum_Ing= summary(GEIH_2018%>%select(grep('^y|ie|ing|im|iof', names(GEIH_2018))), digits = 4)
sum_Ing
View(GEIH_2018)
View(sexo)
sexo
help("geom_histogram")
sexo <- ggplot(GEIH_2018, aes(sex)) +
geom_histogram(aes(y=..density..),fill = "#28BFE8", color = "white",binwidth=0.5,) +
geom_vline(aes(xintercept=mean(sex),color="Mean"), size=1)+
geom_vline(aes(xintercept=mean(sex)+sd(sex),color="sd"), linetype="dashed", size=1)+
geom_vline(aes(xintercept=mean(sex)-sd(sex),color="sd"), linetype="dashed", size=1)+
scale_color_manual(name= "sexo", values = c(Mean = "blue", sd = "red"))+
theme_minimal()
sexo
age <- ggplot(GEIH_2018, aes(age)) +
geom_histogram(aes(y=..density..),fill = "#28BFE8", color = "white") +
geom_vline(aes(xintercept=mean(age),color="Mean"), size=1)+
geom_vline(aes(xintercept=mean(age)+sd(age),color="sd"), linetype="dashed", size=1)+
geom_vline(aes(xintercept=mean(age)-sd(age),color="sd"), linetype="dashed", size=1)+
scale_color_manual(name= "age", values = c(Mean = "blue", sd = "red"))+
theme_minimal()
estrato <- ggplot(GEIH_2018, aes(estrato1)) +
geom_histogram(aes(y=..density..),fill = "#28BFE8", color = "white",binwidth=1) +
geom_vline(aes(xintercept=mean(estrato1),color="Mean"), size=1)+
geom_vline(aes(xintercept=mean(estrato1)+sd(estrato1),color="sd"), linetype="dashed", size=1)+
geom_vline(aes(xintercept=mean(estrato1)-sd(estrato1),color="sd"), linetype="dashed", size=1)+
scale_color_manual(name= "Estrato", values = c(Mean = "blue", sd = "red"))+
theme_minimal()
ingtot <- ggplot(GEIH_2018, aes(ingtot)) +
geom_histogram(aes(y=..density..),fill = "#28BFE8", color = "white",binwidth=1) +
geom_vline(aes(xintercept=mean(ingtot),color="Mean"), size=1)+
geom_vline(aes(xintercept=mean(ingtot)+sd(ingtot),color="sd"), linetype="dashed", size=1)+
geom_vline(aes(xintercept=mean(ingtot)-sd(ingtot),color="sd"), linetype="dashed", size=1)+
scale_color_manual(name= "ingreso total", values = c(Mean = "blue", sd = "red"))+
theme_minimal()
ingtot
ingtot <- ggplot(GEIH_2018, aes(ingtot)) +
geom_histogram(aes(y=..density..),fill = "#28BFE8", color = "white",binwidth=1) +
geom_vline(aes(xintercept=mean(ingtot),color="Mean"))+
geom_vline(aes(xintercept=mean(ingtot)+sd(ingtot),color="sd"), linetype="dashed", size=1)+
geom_vline(aes(xintercept=mean(ingtot)-sd(ingtot),color="sd"), linetype="dashed", size=1)+
scale_color_manual(name= "ingreso total", values = c(Mean = "blue", sd = "red"))+
theme_minimal()
ingtot
tab(GEIH_2018$maxEducLevel)
tabULATE(GEIH_2018$maxEducLevel)
tabulate(GEIH_2018$maxEducLevel)
summary(GEIH_2018$maxEducLevel)
## variables dummies
sum_caract= summary(GEIH_2018%>%select(sex,clase,college,cotPension,cuentaPropia,formal,informal,inac,inac,ocu,pea,pet,wap,microEmpresa), digits = 4)
sum_caract
ggplot(GEIH_2018, aes(x = 1, weight = sex, fill =sex)) +
geom_bar(width = 1)
ggplot(GEIH_2018, aes(x = 1, weight = sex, fill =sex)) +
geom_bar(width = 1)+
coord_polar(theta = "y") +
geom_text(aes(x = 1.3, y = mid, label = label)) +
theme_nothing()
ggplot(GEIH_2018, aes(x = 1, weight = sex, fill =sex)) +
geom_bar(width = 1)+
coord_polar(theta = "y")
ggplot(GEIH_2018, aes(x = 1, weight = sex)) +
geom_bar(width = 1)+
coord_polar(theta = "y")
geom_text(aes(x = 1.3)) +
theme_nothing()
## variables dummies
GEIH_2018$dummy=1
summary(GEIH_2018$dummy)
ggplot(GEIH_2018, aes(x = 1, weight = dummy, fill =sex)) +
geom_bar(width = 1)+
coord_polar(theta = "y")
ggplot(GEIH_2018, aes(x = 1, weight = dummy, fill = sex)) +
geom_bar(width = 1)+
coord_polar(theta = "y")
sex = GEIH_2018%>%
group_by(sex)%>%
summarise(mean(dummy))
View(sex)
sex = GEIH_2018%>%
group_by(sex)%>%
summarise(mean(sex))
View(sex)
sex = GEIH_2018%>%
group_by(sex)%>%
summarise(sum(sex))
View(sex)
sex = GEIH_2018%>%
group_by(sex)%>%
summarise(sum(dummy))
View(sex)
len(GEIH_2018)
length(GEIH_20189)
length(GEIH_2018)
nrow(GEIH_2018)
count(GEIH_2018$sex)
nrow(GEIH_2018$sex=1)
nrow(select(GEIH_2018,sex=1))
nrow(select(GEIH_2018,sex==1))
sex = GEIH_2018%>%filter(GEIH_2018$sex=1)
sex = GEIH_2018%>%filter(GEIH_2018$sex==1)
sex = GEIH_2018%>%
group_by(sex)%>%
summarise(Porcentage=nrow(filter(GEIH_2018$sex==1))/nrow(GEIH_2018))
help(filter)
sex = GEIH_2018%>%
group_by(sex)%>%
summarise(Porcentage=nrow(filter(GEIH_2018,sex==1))/nrow(GEIH_2018))
View(sex)
sex = GEIH_2018%>%
group_by(sex)%>%
summarise(Porcentage=count(sex)/nrow(GEIH_2018))
sex = GEIH_2018%>%
group_by(sex)%>%
summarise(Porcentage=sum(dummy)/nrow(GEIH_2018))
View(sex)
sex = GEIH_2018%>%
group_by(sex)%>%
summarise(Porcentage=sum(dummy)/nrow(GEIH_2018))
View(sex)
geom_text(aes(x = 1.3, y = sex, label = label)) +
theme_nothing()
ggplot(GEIH_2018, aes(x = 1, weight = GEIH_2018%>%
group_by(sex)%>%
summarise(Porcentage=sum(dummy)/nrow(GEIH_2018)), fill = sex)) +
geom_bar(width = 1)+
coord_polar(theta = "y")
View(sex)
ggplot(sex, aes(x = 1, weight = Porcentage, fill = sex)) +
geom_bar(width = 1)+
coord_polar(theta = "y")
sex = GEIH_2018%>%
group_by(sex)%>%
summarise(Porcentage=sum(dummy)/nrow(GEIH_2018))%>%
mutate(pcnt = `n` / sum(`n`))
sex = GEIH_2018%>%
group_by(sex)%>%
summarise(Porcentage=sum(dummy)/nrow(GEIH_2018))%>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))
sex = GEIH_2018%>%
group_by(sex)%>%
count()
View(sex)
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = "Mujeres" (sex == 1) + "Hombres" * (sex == 0))
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))
mutate(etiquetas = Cat + scales::percent(pcnt))
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))
View(sex)
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
mutate(etiquetas = Cat + scales::percent(pcnt))
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
mutate(etiquetas = str(Cat) + str(scales::percent(pcnt)))
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
mutate(etiquetas = str(Cat) str(scales::percent(pcnt)))
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
mutate(etiquetas = str(Cat) str(scales::percent(pcnt)))
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
mutate(etiquetas = paste(Cat, str(scales::percent(pcnt))))
View(sex)
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
mutate(etiquetas = paste(Cat, str(scales::percent(pcnt))))
View(sex)
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
mutate(etiquetas = paste(Cat, str(pcnt*100),"%"))
View(sex)
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
mutate(etiquetas = paste(Cat, strtoi(pcnt*100),"%"))
View(sex)
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
mutate(etiquetas = paste(Cat, strtoi(pcnt),"%"))
View(sex)
strtoi(sex$pcnt)
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
mutate(etiquetas = paste(Cat, strtoi(pcnt),"%"))
sex$pcnt
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`))%>%
mutate(Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
mutate(etiquetas = paste(Cat, toString(pcnt),"%"))
View(sex)
View(sex)
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`),
Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"),
etiquetas = paste(Cat, toString(round(pcnt*100, digits = 2)),"%"))
View(sex)
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(pcnt = `n` / sum(`n`),
Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
group_by(sex)%>%
mutate(etiquetas = paste(Cat, toString(round(pcnt*100, digits = 2)),"%"))
View(sex)
geom_text(aes(x = 1.3, y = sex, label = etiquetas)) +
theme_nothing()
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Cat)) +
geom_bar(width = 1)+
coord_polar(theta = "y")
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(Porcentage = `n` / sum(`n`),
Cat = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
group_by(sex)%>%
mutate(etiquetas = paste(Cat, toString(round(Porcentage*100, digits = 2)),"%"))
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Cat)) +
geom_bar(width = 1)+
coord_polar(theta = "y")
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Cat)) +
geom_bar(width = 1)+
coord_polar(theta = "y") +
geom_text(aes(x = 1.3, y = sex, label = etiquetas)) +
theme_nothing()
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Cat)) +
geom_bar(width = 1)+
coord_polar(theta = "y")
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Cat)) +
geom_bar(width = 1)+
coord_polar(theta = "y")+
theme_minimal()
help(geom_bar)
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Cat)) +
geom_bar(width = 1,)+
coord_polar(theta = "y")+
theme_minimal()
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(Porcentage = `n` / sum(`n`),
Sexo = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
group_by(sex)%>%
mutate(etiquetas = paste(Cat, toString(round(Porcentage*100, digits = 2)),"%"))
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Sexo)) +
geom_bar(width = 1,)+
coord_polar(theta = "y")+
theme_minimal()
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(Porcentage = `n` / sum(`n`),
Sexo = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
group_by(sex)%>%
mutate(etiquetas = paste(Cat, toString(round(Porcentage*100, digits = 2)),"%"))
sex = GEIH_2018%>%
group_by(sex)%>%
count() %>%
ungroup() %>%
mutate(Porcentage = `n` / sum(`n`),
Sexo = case_when(sex == 1 ~ "Mujeres", + sex == 0 ~ "Hombres"))%>%
group_by(sex)%>%
mutate(etiquetas = paste(Sexo, toString(round(Porcentage*100, digits = 2)),"%"))
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Sexo)) +
geom_bar(width = 1,)+
coord_polar(theta = "y")+
theme_minimal()
help(ggplot)
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Sexo)) +
geom_bar(width = 1,)+
coord_polar(theta = "y")+
theme_void()
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Sexo)) +
geom_bar(width = 1,)+
coord_polar(theta = "y")
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Sexo)) +
geom_bar(width = 1,)+
geom_text(aes(label = etiquetas),position = position_stack(vjust = 0.5))
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Sexo)) +
geom_bar(width = 1,)+
geom_text(aes(label = etiquetas),position = position_stack(vjust = 0.5))+
coord_polar(theta = "y")+
theme_void()
ggplot(sex, aes(x = 1, y = Porcentage, fill = Sexo)) +
geom_bar(width = 1,)+
geom_text(aes(label = etiquetas),position = position_stack(vjust = 0.5))+
coord_polar(theta = "y")+
theme_void()
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Sexo)) +
geom_bar(width = 1,)+
coord_polar(theta = "y")+
theme_void()
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Sexo)) +
geom_bar(width = 1,)+
geom_text(aes(label = etiquetas, y=Sexo),position = position_stack(vjust = 0.5))+
coord_polar(theta = "y")+
theme_void()
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Sexo)) +
geom_bar(width = 1,)+
geom_text(aes(label = etiquetas),position = position_stack(vjust = 0.5))+
coord_polar(theta = "y")+
theme_void()
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Sexo)) +
geom_bar(width = 1,)+
geom_text(aes(label = etiquetasy,y=Porcentage ),position = position_stack(vjust = 0.5))+
coord_polar(theta = "y")+
theme_void()
ggplot(sex, aes(x = 1, weight = Porcentage, fill = Sexo)) +
geom_bar(width = 1,)+
geom_text(aes(label = etiquetas, y=Porcentage ),position = position_stack(vjust = 0.5))+
coord_polar(theta = "y")+
theme_void()
